<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Building a Shiny App • volcano3D</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Building a Shiny App">
<meta property="og:description" content="volcano3D">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158679490-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158679490-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">volcano3D</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Extended_Vignette.html">Volcano3D Vignette</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Additional Tutorials</li>
    <li>
      <a href="../articles/pvalues_generator.html">Generating Pvalues Objects</a>
    </li>
    <li>
      <a href="../articles/shiny_builder.html">Using Volcano3D to create Shiny Apps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    Reference Manual
  </a>
</li>
<li>
  <a href="https://github.com/KatrionaGoldmann/volcano3D">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="shiny_builder_files/header-attrs-2.6/header-attrs.js"></script><link href="shiny_builder_files/font-awesome-5.1.0/css/all.css" rel="stylesheet">
<link href="shiny_builder_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Building a Shiny App</h1>
                        <h4 class="author">Katriona Goldmann</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/KatrionaGoldmann/volcano3D/blob/master/vignettes/shiny_builder.rmd"><code>vignettes/shiny_builder.rmd</code></a></small>
      <div class="hidden name"><code>shiny_builder.rmd</code></div>

    </div>

    
    
<p><img src="../logo.png" align="right" alt="" width="200"></p>
<ul>
<li>
<a href="#introduction">Introduction</a>
<ul>
<li>
<a href="#getting-started">Getting Started</a>
<ul>
<li><a href="#install-shiny">Install Shiny</a></li>
<li><a href="#install-volcano3d">Install volcano3D</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#structure-of-a-shiny-app">Structure of a Shiny App</a></li>
<li><a href="#basic-example">Basic Example</a></li>
<li><a href="#peac-shiny-example">PEAC Shiny Example</a></li>
<li><a href="#hosting-and-deploying-shiny-apps">Hosting and Deploying shiny apps</a></li>
</ul>
<hr>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This tutorial provides an example for deploying <a href="https://shiny.rstudio.com">Shiny Apps</a> using the interactive visualisations created by volcano3D. The goal of this example is to generate a tool similar to the web page available at <a href="https://peac.hpc.qmul.ac.uk">https://peac.hpc.qmul.ac.uk</a>.</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<div id="install-shiny" class="section level3">
<h3 class="hasAnchor">
<a href="#install-shiny" class="anchor"></a>Install Shiny</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></code></pre></div>
</div>
<div id="install-volcano3d" class="section level3">
<h3 class="hasAnchor">
<a href="#install-volcano3d" class="anchor"></a>Install volcano3D</h3>
<div id="install-from-cran" class="section level4">
<h4 class="hasAnchor">
<a href="#install-from-cran" class="anchor"></a>Install from CRAN</h4>
<p><a href="https://cran.r-project.org/package=volcano3D"><img src="https://www.r-pkg.org/badges/version/volcano3D" alt="CRAN status"></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"volcano3D"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html">volcano3D</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="install-from-github" class="section level4">
<h4 class="hasAnchor">
<a href="#install-from-github" class="anchor"></a>Install from Github</h4>
<p><a href="https://GitHub.com/KatrionaGoldmann/volcano3D/tags/"><img src="https://img.shields.io/github/tag/KatrionaGoldmann/volcano3D.svg" alt="GitHub tag"></a></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
<span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"KatrionaGoldmann/volcano3D"</span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html">volcano3D</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="install-the-sample-data" class="section level4">
<h4 class="hasAnchor">
<a href="#install-the-sample-data" class="anchor"></a>Install the sample data</h4>
<p>The sample data used in this vignette can be loaded from the <a href="https://github.com/KatrionaGoldmann/volcano3Ddata">volcano3Ddata package</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"KatrionaGoldmann/volcano3Ddata"</span><span class="op">)</span></code></pre></div>
<hr>
</div>
</div>
</div>
</div>
<div id="structure-of-a-shiny-app" class="section level1">
<h1 class="hasAnchor">
<a href="#structure-of-a-shiny-app" class="anchor"></a>Structure of a Shiny App</h1>
<p>Shiny is an R package that makes it easy to build interactive web applications straight from R. These apps are build from three components:</p>
<ul>
<li><p>a user interface object</p></li>
<li><p>a server function</p></li>
<li><p>a call to the shinyApp function</p></li>
</ul>
<p>The user interface (ui) object controls the layout and appearance of your app. The server function contains the instructions required to build your app. Finally the shinyApp function creates Shiny app objects from an explicit UI/server pair.</p>
<p>To find out more information about shiny, as well as tutorials and examples visit the <a href="https://shiny.rstudio.com/tutorial/">shiny website</a>.</p>
</div>
<div id="basic-example" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-example" class="anchor"></a>Basic Example</h1>
<p>Using the first example from the shiny website we can create a very basic shiny app. First we build user interface. This sets up the layout and appearance of the app. In this case we will create a histogram, ‘distPlot’, with a given number of bins selected by the ‘bins’ input:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span><span class="op">(</span><span class="st">"Hello Shiny!"</span><span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op">(</span>
                <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span><span class="st">"bins"</span>, label <span class="op">=</span> <span class="st">"No. of bins:"</span>, min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">50</span>, 
                            value <span class="op">=</span> <span class="fl">30</span><span class="op">)</span>
            <span class="op">)</span>,
            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span>outputId <span class="op">=</span> <span class="st">"distPlot"</span><span class="op">)</span><span class="op">)</span>
        <span class="op">)</span>
    <span class="op">)</span></code></pre></div>
<p>Next we build a server which contains the instructions and functions we needs to interact with the ui and build the app:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">output</span><span class="op">$</span><span class="va">distPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span>
            <span class="va">x</span>    <span class="op">&lt;-</span> <span class="va">faithful</span><span class="op">$</span><span class="va">waiting</span>
            <span class="va">bins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">bins</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>
            <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">x</span>, breaks <span class="op">=</span> <span class="va">bins</span>, col <span class="op">=</span> <span class="st">"#75AADB"</span>, border <span class="op">=</span> <span class="st">"white"</span>,
                 xlab <span class="op">=</span> <span class="st">"Waiting time to next eruption (in mins)"</span>,
                 main <span class="op">=</span> <span class="st">"Histogram of waiting times"</span><span class="op">)</span>
        <span class="op">}</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Lastly we call the shinyApp function to create an application. When run locally this open an interactive app, but for the sake of this vignette it is has been left as non-interactive.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></code></pre></div>
<p><img src="shiny_builder_files/figure-html/unnamed-chunk-7-1.png" width="672" style="background-color: #9ecff7; padding:10px;"></p>
</div>
<div id="peac-shiny-example" class="section level1">
<h1 class="hasAnchor">
<a href="#peac-shiny-example" class="anchor"></a>PEAC Shiny Example</h1>
<p>In this example we will create a 3D volcano app similar to the first three tabs from the <a href="https://peac.hpc.qmul.ac.uk">PEAC webpage</a>. First we will load in the objects we need:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html">volcano3D</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/KatrionaGoldmann/volcano3D_data">volcano3Ddata</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">syn_data</span><span class="op">)</span></code></pre></div>
<p>Then we can create the polar volcano3D object:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">syn_polar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/polar_coords.html">polar_coords</a></span><span class="op">(</span>sampledata <span class="op">=</span> <span class="va">syn_metadata</span>,
                          contrast <span class="op">=</span> <span class="st">"Pathotype"</span>,
                          pvalues <span class="op">=</span> <span class="va">syn_pvalues</span>,
                          expression <span class="op">=</span> <span class="va">syn_rld</span>,
                          p_col_suffix <span class="op">=</span> <span class="st">"pvalue"</span>,
                          padj_col_suffix <span class="op">=</span> <span class="st">"padj"</span>,
                          fc_col_suffix <span class="op">=</span> <span class="st">"log2FoldChange"</span>,
                          multi_group_prefix <span class="op">=</span> <span class="st">"LRT"</span>,
                          non_sig_name <span class="op">=</span> <span class="st">"Not Significant"</span>,
                          significance_cutoff <span class="op">=</span> <span class="fl">0.01</span>,
                          label_column <span class="op">=</span> <span class="cn">NULL</span>,
                          fc_cutoff <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></code></pre></div>
<p><strong>PEAC UI</strong></p>
<p>The user interface for this app is slightly more complicated than the previous example and is made up of four tab panels:</p>
<ol style="list-style-type: decimal">
<li>The navigation page: this contains images/icons which link to each of the other tabs</li>
<li>The 3D volcano plot page: this contains the 3D volcano plot for synovium</li>
<li>The gene lookup page: this allows users to look up specific genes from a dropdown</li>
<li>The pvalue table page: this contains a table with the statistics for all genes</li>
</ol>
<p>This requires a few additional packages to be loaded:</p>
<ul>
<li>
<a href="https://cran.r-project.org/web/packages/shinycssloaders/index.html">shinycssloaders</a>: This allows spinners to be used while plots and data load</li>
<li>
<a href="https://cran.r-project.org/web/packages/DT/index.html">DT</a>: for data frame handling</li>
<li>
<a href="https://cran.r-project.org/web/packages/plotly/index.html">plotly</a>: for interactive plots</li>
<li>
<a href="https://cran.r-project.org/web/packages/ggpubr/index.html">ggpubr</a>: for ggplot creation and handling</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/daattali/shinycssloaders">shinycssloaders</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT">DT</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/navbarPage.html">navbarPage</a></span><span class="op">(</span>
    windowTitle<span class="op">=</span><span class="st">"PEAC RNA-Seq"</span>, 
    selected<span class="op">=</span><span class="st">"a"</span>, 
    fluid<span class="op">=</span><span class="cn">TRUE</span>, 
    <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span>type<span class="op">=</span><span class="st">"text/css"</span>, <span class="st">"body {padding-top: 0px;}"</span><span class="op">)</span>,
    id<span class="op">=</span><span class="st">"mainNavbarPage"</span>, 
    <span class="va">tags</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>rel<span class="op">=</span><span class="st">"shortcut icon"</span>, href<span class="op">=</span><span class="st">"favicon.ico"</span><span class="op">)</span><span class="op">)</span>,
    
    <span class="co"># Tab 1: The navigation page with links to other tabs</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">img</a></span><span class="op">(</span>
                src<span class="op">=</span><span class="st">"http://qm-web.chem.qmul.ac.uk/qm-resources/images/crown_tab.gif"</span>, 
                height<span class="op">=</span><span class="fl">30</span>, style<span class="op">=</span><span class="st">"padding: 0px 0px;"</span><span class="op">)</span>, <span class="st">"PEAC RNA-Seq"</span><span class="op">)</span>, 
        value<span class="op">=</span><span class="st">"a"</span>, 
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
                <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">12</span>, align<span class="op">=</span><span class="st">"center"</span>,
                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionLink</a></span><span class="op">(</span>
                           <span class="st">"link_to_tabpanel_v"</span>, 
                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">img</a></span><span class="op">(</span>
                               src<span class="op">=</span><span class="st">"https://bit.ly/39LH4Nv"</span>, 
                               height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>,
                                <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;3D Volcano Plot"</span><span class="op">)</span>,
                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span>,
                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionLink</a></span><span class="op">(</span>
                           <span class="st">"link_to_tabpanel_g"</span>, 
                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">img</a></span><span class="op">(</span>src<span class="op">=</span><span class="st">"https://bit.ly/2yGQSvk"</span>, 
                                   height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>, 
                                <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;Gene Correlations"</span><span class="op">)</span>,
                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span>,
                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionLink</a></span><span class="op">(</span>
                           <span class="st">"link_to_tabpanel_c"</span>, 
                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">img</a></span><span class="op">(</span>src<span class="op">=</span><span class="st">"https://bit.ly/3dVXPJ7"</span>, 
                                   height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>, 
                                 <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;Table of Pvalues"</span><span class="op">)</span>,
                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
            <span class="op">)</span>
        <span class="op">)</span><span class="op">)</span>,
    
    
    <span class="co"># Tab 2: 3D volcano plot </span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Volcano"</span>, value<span class="op">=</span><span class="st">"v"</span>,
             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fu"><a href="https://rdrr.io/pkg/shinycssloaders/man/withSpinner.html">withSpinner</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plotly-shiny.html">plotlyOutput</a></span><span class="op">(</span><span class="st">"volcano"</span>, height<span class="op">=</span><span class="fl">720</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">4</span>, 
                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
                            <span class="co"># option for data type</span>
                            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/radioButtons.html">radioButtons</a></span><span class="op">(</span><span class="st">"data_type"</span>, 
                                                   label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h5</a></span><span class="op">(</span><span class="st">"Polar radius"</span><span class="op">)</span>,
                                                   choices<span class="op">=</span>
                                                       <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Z score"</span><span class="op">=</span><span class="fl">1</span>, 
                                                            <span class="st">"Fold change"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span>,
                                                   selected<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>,
                            <span class="co"># option for colour scheme (discrete or continuous)</span>
                            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/radioButtons.html">radioButtons</a></span><span class="op">(</span><span class="st">"colour_type"</span>, 
                                                   label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h5</a></span><span class="op">(</span><span class="st">"Colour scheme"</span><span class="op">)</span>,
                                                   choices<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Discrete"</span><span class="op">=</span><span class="fl">1</span>, 
                                                                <span class="st">"Continuous"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span>,
                                                   selected<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span><span class="st">"boxplots"</span>, height<span class="op">=</span><span class="fl">400</span><span class="op">)</span><span class="op">)</span>
                 <span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>,
    
    <span class="co"># Tab 3: Gene search:</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Genes"</span>, value<span class="op">=</span><span class="st">"g"</span>,
             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">3</span>,
                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectizeInput</a></span><span class="op">(</span>
                            <span class="st">"gene"</span>, label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h5</a></span><span class="op">(</span><span class="st">"Select a Gene"</span><span class="op">)</span>,
                            choices<span class="op">=</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">polar</span><span class="op">$</span><span class="va">label</span>,
                            options<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
                                onInitialize<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span>
                                    <span class="st">'function() { this.setValue(""); }'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span><span class="st">"gene_plots"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>,
    
    <span class="co"># Tab 4: table setup:</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Table"</span>, value<span class="op">=</span><span class="st">"t"</span>,
             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span>
                     <span class="fl">2</span>,
                     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/checkboxGroupInput.html">checkboxGroupInput</a></span><span class="op">(</span>
                         <span class="st">'group'</span>,
                         <span class="st">'Select upregulated groups'</span>,
                         <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">polar</span><span class="op">$</span><span class="va">sig</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
                         <span class="co"># by default select all significant</span>
                         selected<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">polar</span><span class="op">$</span><span class="va">sig</span><span class="op">)</span><span class="op">[</span>
                             <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">polar</span><span class="op">$</span><span class="va">sig</span><span class="op">)</span> <span class="op">!=</span> 
                                 <span class="st">"Not Significant"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,
                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">dataTableOutput</a></span><span class="op">(</span><span class="st">"full_table"</span><span class="op">)</span><span class="op">)</span>
             <span class="op">)</span><span class="op">)</span>
    
<span class="op">)</span>    </code></pre></div>
<p><strong>PEAC Server</strong></p>
<p>The server build the objects and plots required for the app.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
    
    <span class="co"># Navitation tab: allow images to link to tabs</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_v</span>, <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_g</span>, <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"g"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_t</span>, <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"t"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span>
    
    <span class="co"># Volcano tab: Create the 3D volcano plot</span>
    <span class="va">output</span><span class="op">$</span><span class="va">volcano</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plotly-shiny.html">renderPlotly</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">data_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">data_type</span><span class="op">)</span>
        <span class="va">colour_scheme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">colour_type</span><span class="op">)</span>
        
        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">data_type</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="va">data_type</span> <span class="op">&lt;-</span> <span class="fl">1</span>
        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">colour_scheme</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="va">colour_scheme</span> <span class="op">&lt;-</span> <span class="fl">1</span>
        
        <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/volcano3D.html">volcano3D</a></span><span class="op">(</span><span class="va">syn_polar</span>,
                       colour_scale <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">colour_scheme</span>, 
                                             <span class="st">"discrete"</span>, <span class="st">"continuous"</span><span class="op">)</span>,
                       fc_or_zscore <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">data_type</span>, <span class="st">"zscore"</span>, <span class="st">"fc"</span><span class="op">)</span>,
                       xy_aspectratio <span class="op">=</span> <span class="fl">1</span>,
                       z_aspectratio <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">%&gt;%</span>
            <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html">layout</a></span><span class="op">(</span>showlegend <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span><span class="va">colour_scheme</span>, <span class="cn">T</span>, <span class="cn">F</span><span class="op">)</span><span class="op">)</span> 
    <span class="op">}</span><span class="op">)</span>
    
    
    <span class="co"># Volcano tab: Create pathotype boxplots when genes clicked </span>
    <span class="va">output</span><span class="op">$</span><span class="va">boxplots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/event_data.html">event_data</a></span><span class="op">(</span><span class="st">"plotly_click"</span><span class="op">)</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span>
        <span class="va">gene</span> <span class="op">=</span> <span class="va">s</span><span class="op">$</span><span class="va">key</span>
        <span class="fu"><a href="../reference/boxplot_trio.html">boxplot_trio</a></span><span class="op">(</span><span class="va">syn_polar</span>,
                     value <span class="op">=</span> <span class="va">gene</span>,
                     test <span class="op">=</span> <span class="st">"polar_padj"</span>,
                     levels_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Lymphoid"</span>, <span class="st">"Myeloid"</span>, <span class="st">"Fibroid"</span><span class="op">)</span>,
                     box_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green3"</span><span class="op">)</span>,
                     step_increase <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>
        
    <span class="op">}</span><span class="op">)</span>
    
    <span class="co"># Gene tab: create plots for selected genes</span>
    <span class="va">output</span><span class="op">$</span><span class="va">gene_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">s</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">gene</span>
        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html">req</a></span><span class="op">(</span><span class="va">s</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span>
        
        <span class="co"># synovium pathotype boxplot</span>
        <span class="va">gene</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">gene</span>
        <span class="va">path_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/boxplot_trio.html">boxplot_trio</a></span><span class="op">(</span><span class="va">syn_polar</span>,
                                  value <span class="op">=</span> <span class="va">gene</span>,
                                  test <span class="op">=</span> <span class="st">"polar_padj"</span>,
                                  levels_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Lymphoid"</span>, <span class="st">"Myeloid"</span>, <span class="st">"Fibroid"</span><span class="op">)</span>,
                                  box_colours <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green3"</span><span class="op">)</span>,
                                  step_increase <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>
        
        
        <span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/limma/man/cbind.html">cbind</a></span><span class="op">(</span><span class="va">syn_metadata</span>, <span class="st">"expression"</span><span class="op">=</span><span class="va">syn_rld</span><span class="op">[</span><span class="va">gene</span>, <span class="op">]</span><span class="op">)</span>
        
        <span class="co"># synovium gender boxplot</span>
        <span class="va">g_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Gender</span>, y<span class="op">=</span><span class="va">expression</span>, fill<span class="op">=</span><span class="va">Gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">geom_boxplot</span><span class="op">(</span>outlier.shape<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">geom_jitter</span><span class="op">(</span>width<span class="op">=</span><span class="fl">0.25</span>, height<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">theme</span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span>
        
        <span class="co"># synovium batch boxplot</span>
        <span class="va">b_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span>, <span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">Batch</span>, y<span class="op">=</span><span class="va">expression</span>, fill<span class="op">=</span><span class="va">Batch</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">geom_boxplot</span><span class="op">(</span>outlier.shape<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">geom_jitter</span><span class="op">(</span>width<span class="op">=</span><span class="fl">0.25</span>, height<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
            <span class="fu">theme</span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span>
        
        <span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span><span class="va">path_plot</span>, <span class="va">g_plot</span>, <span class="va">b_plot</span>, ncol<span class="op">=</span><span class="fl">3</span>, align<span class="op">=</span><span class="st">"hv"</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
    
    
    <span class="co"># Table Tab: create a data table of stats for upregulated genes. </span>
    <span class="va">output</span><span class="op">$</span><span class="va">full_table</span> <span class="op">&lt;-</span> <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html">renderDataTable</a></span><span class="op">(</span><span class="op">{</span>
        <span class="va">tab</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/limma/man/cbind.html">cbind</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">polar</span>, <span class="va">syn_polar</span><span class="op">@</span><span class="va">pvalues</span><span class="op">)</span>
        <span class="va">tab</span> <span class="op">=</span> <span class="va">tab</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">pvalues</span><span class="op">)</span>, <span class="st">"sig"</span><span class="op">)</span><span class="op">]</span>
        <span class="va">groups</span> <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">group</span>
        <span class="va">tab</span> <span class="op">=</span> <span class="va">tab</span><span class="op">[</span><span class="va">tab</span><span class="op">$</span><span class="va">sig</span> <span class="op">%in%</span> <span class="va">groups</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"label"</span><span class="op">]</span>
        <span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">tab</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
            rowCallback <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/DT/man/DT-imports.html">JS</a></span><span class="op">(</span>
                <span class="st">"function(row, data) {"</span>,
                <span class="st">"for (i = 1; i &lt; data.length; i++) {"</span>,
                <span class="st">"if (data[i]&gt;0 | data[i]&lt;0){"</span>,
                <span class="st">"$('td:eq('+i+')', row).html(data[i].toExponential(1));"</span>,
                <span class="st">"}"</span>,
                <span class="st">"}"</span>,
                <span class="st">"}"</span><span class="op">)</span>
        <span class="op">)</span><span class="op">)</span>
    <span class="op">}</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>bInfo<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
    
<span class="op">}</span></code></pre></div>
<p><strong>PEAC shinyApp</strong></p>
<p>Once the ui and server are build we can output the app <em>(note in markdown/html format this is not interactive)</em>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></code></pre></div>
<p><img src="shiny_builder_files/figure-html/unnamed-chunk-12-1.png" width="672" style="background-color: #9ecff7; padding:10px;"></p>
</div>
<div id="hosting-and-deploying-shiny-apps" class="section level1">
<h1 class="hasAnchor">
<a href="#hosting-and-deploying-shiny-apps" class="anchor"></a>Hosting and Deploying shiny apps</h1>
<p>There are three primary ways to deploy the app to the web, as outlined on the <a href="https://shiny.rstudio.com/deploy/">shiny website</a>: shinyapps.io, shiny servers and RStudio Connect. The PEAC website was deployed using Shiny Server. Here are a few useful tutorials and sources for using each of these methods:</p>
<p><strong>shinyapps.io</strong></p>
<p>To deploy with shinyapps.io through the cloud see <a href="http://www.shinyapps.io">http://www.shinyapps.io</a>. There are free plans available for up to 5 apps and fewer than 25 active hours, further than this however it is paywalled.</p>
<p><strong>Deploying with Shiny Server</strong></p>
<p>Shiny Server is a back end program so gives you complete control. There are a few nice tutorials for deploying shiny apps on a server:</p>
<ul>
<li>
<a href="https://www.linode.com/docs/development/r/how-to-deploy-rshiny-server-on-ubuntu-and-debian/">How to Deploy Interactive R Apps with Shiny Server</a> - Jared Kobos</li>
<li>
<a href="https://www.r-bloggers.com/deploying-your-very-own-shiny-server/">Deploying Your Very Own Shiny Server</a> - Morgan Benton</li>
</ul>
<p>Alternatively, Docker is also useful for deploying shiny apps into discrete units (containers) with their own virtual environment:</p>
<ul>
<li>
<a href="https://towardsdatascience.com/deploy-your-rshiny-app-locally-with-docker-427386010eba">Deploy your RShiny App Locally with Docker</a> - Jillian Rowe</li>
<li>
<a href="https://juanitorduz.github.io/dockerize-a-shinyapp/">Dockerize a shinyApp</a> - Dr. Juan Camilo Orduz</li>
<li>
<a href="https://telethonkids.wordpress.com/2019/02/08/deploying-an-r-shiny-app-with-docker/">Deploying an R Shiny App With Docker</a> - Paul Stevenson</li>
</ul>
<p><strong>RStudio Connect</strong></p>
<p>RStudio connect is a publishing platform designed to be used internally by businesses. I have not looked into using this method but for more information see <a href="https://rstudio.com/products/connect/">https://rstudio.com/products/connect/</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<style>
  #left {
    float:left;
  }
  #right {
    width:100%;
    position:relative;
    text-align:right;
    align:right;
    float:right;
  }
  *.icon-grey {color: lightgrey}
  j {
    text-align:center;
    vertical-align:middle;
    position: relative;
    padding-bottom: 12px;
  }
  .smadge:after{
    content:"EMR";
    position: absolute;
    background: lightgrey;
    height:1.2rem;
    top:1rem;
    right:-1rem;
    width:2.3rem;
    text-align: center;
    line-height: 1rem;;
    font-size: 1rem;
    color: #cc0099;
    border-radius: 10%;
  }
  .bladge:after{
    content:"C4TB";
    position: absolute;
    background: lightgrey;
    height:1.2rem;
    top:1rem;
    right:-1rem;
    width:2.7rem;
    text-align: center;
    line-height: 1rem;;
    font-size: 1rem;
    color: #cc0099;
    border-radius: 10%;
  }
</style>
<div id="left">
Developed by <a href="https://www.turing.ac.uk/people/enrichment-students/katriona-goldmann">Katriona Goldmann</a> and <a href="https://www.qmul.ac.uk/whri/people/academic-staff/items/lewismyles.html">Myles Lewis</a>
</div>

<div id="right">
<a href="https://www.qmul.ac.uk/whri/emr/"><j class="fa fa-university fa-2x  icon-grey smadge" aria-hidden="false" style="color:#cc0099"></j></a>
<span style="margin-left:1rem"></span>

<a href="https://www.qmul.ac.uk/c4tb/"><j class="fa fa-university fa-2x  icon-grey bladge" aria-hidden="false" style="color:#cc0099"></j></a>
<span style="margin-left:1rem"></span>

<a href="https://towardsdatascience.com/interactive-differential-expression-analysis-with-volcano3d-cf6c37b5aa6a"><i class="fab fa-medium-m fa-2x" style="color:#cc0099"></i></a>
<span style="margin-left:1rem"></span>
<a href="mailto:k.goldmann@qmul.ac.uk" class="fas fa-envelope fa-2x" style="color:#cc0099">
</a><span style="margin-left:1rem"></span>

<a href="https://github.com/KatrionaGoldmann"><i class="fab fa-github fa-2x" style="color:#cc0099"></i></a>
<span style="margin-left:1rem"></span>

<a href="https://twitter.com/_katriona"><i class="fab fa-twitter fa-2x" style="color:#cc0099"></i></a>
</div>

      </footer>
</div>

  


  </body>
</html>

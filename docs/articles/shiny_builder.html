<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="volcano3D">
<title>Building a Shiny App • volcano3D</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building a Shiny App">
<meta property="og:description" content="volcano3D">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">volcano3D</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Extended_Vignette.html">volcano3D Vignette</a>
    <a class="dropdown-item" href="../articles/Vignette.html">volcano3D</a>
    <a class="dropdown-item" href="../articles/Vignette_2x3.html">volcano3D: 2x3-way analysis</a>
    <a class="dropdown-item" href="../articles/shiny_builder.html">Building a Shiny App</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/KatrionaGoldmann/volcano3D/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="shiny_builder_files/font-awesome-5.1.0/css/all.css" rel="stylesheet">
<link href="shiny_builder_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Building a Shiny App</h1>
                        <h4 data-toc-skip class="author">Katriona
Goldmann</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/KatrionaGoldmann/volcano3D/blob/HEAD/vignettes/shiny_builder.rmd" class="external-link"><code>vignettes/shiny_builder.rmd</code></a></small>
      <div class="d-none name"><code>shiny_builder.rmd</code></div>
    </div>

    
    
<p><img src="../logo.png" align="right" alt="" width="200"></p>
<ul>
<li>
<a href="#section-introduction">Introduction</a>
<ul>
<li>
<a href="#section-getting-started">Getting Started</a>
<ul>
<li><a href="#section-install-shiny">Install Shiny</a></li>
<li><a href="#section-install-volcano3d">Install volcano3D</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#section-structure-of-a-shiny-app">Structure of a Shiny
App</a></li>
<li><a href="#section-basic-example">Basic Example</a></li>
<li><a href="#section-peac-shiny-example">PEAC Shiny Example</a></li>
<li><a href="#section-hosting-and-deploying-shiny-apps">Hosting and
Deploying shiny apps</a></li>
</ul>
<hr>
<div class="section level2">
<h2 id="section-introduction">Introduction<a class="anchor" aria-label="anchor" href="#section-introduction"></a>
</h2>
<p>This tutorial provides an example for deploying <a href="https://shiny.rstudio.com" class="external-link">Shiny Apps</a> using the interactive
visualisations created by volcano3D. The goal of this example is to
generate a tool similar to the web page available at <a href="https://peac.hpc.qmul.ac.uk" class="external-link">https://peac.hpc.qmul.ac.uk</a>.</p>
<div class="section level3">
<h3 id="section-getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#section-getting-started"></a>
</h3>
<div class="section level4">
<h4 id="section-install-shiny">Install Shiny<a class="anchor" aria-label="anchor" href="#section-install-shiny"></a>
</h4>
<div class="sourceCode" id="section-cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"shiny"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="section-install-volcano3d">Install volcano3D<a class="anchor" aria-label="anchor" href="#section-install-volcano3d"></a>
</h4>
<div class="section level5">
<h5 id="section-install-from-cran">Install from CRAN<a class="anchor" aria-label="anchor" href="#section-install-from-cran"></a>
</h5>
<p><a href="https://cran.r-project.org/package=volcano3D" class="external-link"><img src="https://www.r-pkg.org/badges/version/volcano3D" alt="CRAN status"></a></p>
<div class="sourceCode" id="section-cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"volcano3D"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html" class="external-link">volcano3D</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="section-install-from-github">Install from Github<a class="anchor" aria-label="anchor" href="#section-install-from-github"></a>
</h5>
<p><a href="https://GitHub.com/KatrionaGoldmann/volcano3D/tags/" class="external-link"><img src="https://img.shields.io/github/tag/KatrionaGoldmann/volcano3D.svg" alt="GitHub tag"></a></p>
<div class="sourceCode" id="section-cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"KatrionaGoldmann/volcano3D"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html" class="external-link">volcano3D</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="section-install-the-sample-data">Install the sample data<a class="anchor" aria-label="anchor" href="#section-install-the-sample-data"></a>
</h5>
<p>The sample data used in this vignette can be loaded from the <a href="https://github.com/KatrionaGoldmann/volcano3Ddata" class="external-link">volcano3Ddata
package</a>.</p>
<div class="sourceCode" id="section-cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"KatrionaGoldmann/volcano3Ddata"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="section-structure-of-a-shiny-app">Structure of a Shiny App<a class="anchor" aria-label="anchor" href="#section-structure-of-a-shiny-app"></a>
</h2>
<p>Shiny is an R package that makes it easy to build interactive web
applications straight from R. These apps are build from three
components:</p>
<ul>
<li><p>a user interface object</p></li>
<li><p>a server function</p></li>
<li><p>a call to the shinyApp function</p></li>
</ul>
<p>The user interface (ui) object controls the layout and appearance of
your app. The server function contains the instructions required to
build your app. Finally the shinyApp function creates Shiny app objects
from an explicit UI/server pair.</p>
<p>To find out more information about shiny, as well as tutorials and
examples visit the <a href="https://shiny.rstudio.com/tutorial/" class="external-link">shiny
website</a>.</p>
</div>
<div class="section level2">
<h2 id="section-basic-example">Basic Example<a class="anchor" aria-label="anchor" href="#section-basic-example"></a>
</h2>
<p>Using the first example from the shiny website we can create a very
basic shiny app. First we build user interface. This sets up the layout
and appearance of the app. In this case we will create a histogram,
‘distPlot’, with a given number of bins selected by the ‘bins’
input:</p>
<div class="sourceCode" id="section-cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html" class="external-link">titlePanel</a></span><span class="op">(</span><span class="st">"Hello Shiny!"</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span><span class="st">"bins"</span>, label <span class="op">=</span> <span class="st">"No. of bins:"</span>, min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                            value <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span>            <span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span>outputId <span class="op">=</span> <span class="st">"distPlot"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Next we build a server which contains the instructions and functions
we needs to interact with the ui and build the app:</p>
<div class="sourceCode" id="section-cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">output</span><span class="op">$</span><span class="va">distPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>            <span class="va">x</span>    <span class="op">&lt;-</span> <span class="va">faithful</span><span class="op">$</span><span class="va">waiting</span></span>
<span>            <span class="va">bins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">bins</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span>, breaks <span class="op">=</span> <span class="va">bins</span>, col <span class="op">=</span> <span class="st">"#75AADB"</span>, border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>                 xlab <span class="op">=</span> <span class="st">"Waiting time to next eruption (in mins)"</span>,</span>
<span>                 main <span class="op">=</span> <span class="st">"Histogram of waiting times"</span><span class="op">)</span></span>
<span>        <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Lastly we call the shinyApp function to create an application. When
run locally this open an interactive app, but for the sake of this
vignette it is has been left as non-interactive.</p>
<div class="sourceCode" id="section-cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<iframe data-deferred-src="app31e7a4d90457ecf0147aedca5cb4fde0/?w=&amp;__subapp__=1" width="100%" height="400" class="shiny-frame shiny-frame-deferred"></iframe>
</div>
<div class="section level2">
<h2 id="section-peac-shiny-example">PEAC Shiny Example<a class="anchor" aria-label="anchor" href="#section-peac-shiny-example"></a>
</h2>
<p>In this example we will create a 3D volcano app similar to the first
three tabs from the <a href="https://peac.hpc.qmul.ac.uk" class="external-link">PEAC
webpage</a>. First we will load in the objects we need:</p>
<div class="sourceCode" id="section-cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://katrionagoldmann.github.io/volcano3D/index.html" class="external-link">volcano3D</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/KatrionaGoldmann/volcano3D_data" class="external-link">volcano3Ddata</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">syn_data</span><span class="op">)</span></span>
<span><span class="va">syn_metadata</span><span class="op">$</span><span class="va">Pathotype</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">syn_metadata</span><span class="op">$</span><span class="va">Pathotype</span>, </span>
<span>                                 levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lymphoid"</span>, <span class="st">"Myeloid"</span>, <span class="st">"Fibroid"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then we can create the polar volcano3D object:</p>
<div class="sourceCode" id="section-cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">syn_polar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/polar_coords.html">polar_coords</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="va">syn_metadata</span><span class="op">$</span><span class="va">Pathotype</span>,</span>
<span>                          data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">syn_rld</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>PEAC UI</strong></p>
<p>The user interface for this app is slightly more complicated than the
previous example and is made up of four tab panels:</p>
<ol style="list-style-type: decimal">
<li>The navigation page: this contains images/icons which link to each
of the other tabs</li>
<li>The 3D volcano plot page: this contains the 3D volcano plot for
synovium</li>
<li>The gene lookup page: this allows users to look up specific genes
from a dropdown</li>
<li>The pvalue table page: this contains a table with the statistics for
all genes</li>
</ol>
<p>This requires a few additional packages to be loaded:</p>
<ul>
<li>
<a href="https://cran.r-project.org/web/packages/shinycssloaders/index.html" class="external-link">shinycssloaders</a>:
This allows spinners to be used while plots and data load</li>
<li>
<a href="https://cran.r-project.org/web/packages/DT/index.html" class="external-link">DT</a>: for
data frame handling</li>
<li>
<a href="https://cran.r-project.org/web/packages/plotly/index.html" class="external-link">plotly</a>:
for interactive plots</li>
<li>
<a href="https://cran.r-project.org/web/packages/ggpubr/index.html" class="external-link">ggpubr</a>:
for ggplot creation and handling</li>
</ul>
<div class="sourceCode" id="section-cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/daattali/shinycssloaders" class="external-link">shinycssloaders</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com" class="external-link">plotly</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/" class="external-link">ggpubr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/navbarPage.html" class="external-link">navbarPage</a></span><span class="op">(</span></span>
<span>    windowTitle<span class="op">=</span><span class="st">"PEAC RNA-Seq"</span>, </span>
<span>    selected<span class="op">=</span><span class="st">"a"</span>, </span>
<span>    fluid<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span>type<span class="op">=</span><span class="st">"text/css"</span>, <span class="st">"body {padding-top: 0px;}"</span><span class="op">)</span>,</span>
<span>    id<span class="op">=</span><span class="st">"mainNavbarPage"</span>, </span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>rel<span class="op">=</span><span class="st">"shortcut icon"</span>, href<span class="op">=</span><span class="st">"favicon.ico"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Tab 1: The navigation page with links to other tabs</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">div</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">img</a></span><span class="op">(</span></span>
<span>                src<span class="op">=</span><span class="st">"http://qm-web.chem.qmul.ac.uk/qm-resources/images/crown_tab.gif"</span>, </span>
<span>                height<span class="op">=</span><span class="fl">30</span>, style<span class="op">=</span><span class="st">"padding: 0px 0px;"</span><span class="op">)</span>, <span class="st">"PEAC RNA-Seq"</span><span class="op">)</span>, </span>
<span>        value<span class="op">=</span><span class="st">"a"</span>, </span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">12</span>, align<span class="op">=</span><span class="st">"center"</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionLink</a></span><span class="op">(</span></span>
<span>                           <span class="st">"link_to_tabpanel_v"</span>, </span>
<span>                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">img</a></span><span class="op">(</span></span>
<span>                               src<span class="op">=</span><span class="st">"https://bit.ly/39LH4Nv"</span>, </span>
<span>                               height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>,</span>
<span>                                <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html" class="external-link">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;3D Volcano Plot"</span><span class="op">)</span>,</span>
<span>                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionLink</a></span><span class="op">(</span></span>
<span>                           <span class="st">"link_to_tabpanel_g"</span>, </span>
<span>                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">img</a></span><span class="op">(</span>src<span class="op">=</span><span class="st">"https://bit.ly/2yGQSvk"</span>, </span>
<span>                                   height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html" class="external-link">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;Gene Correlations"</span><span class="op">)</span>,</span>
<span>                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionLink</a></span><span class="op">(</span></span>
<span>                           <span class="st">"link_to_tabpanel_c"</span>, </span>
<span>                           <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">div</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">img</a></span><span class="op">(</span>src<span class="op">=</span><span class="st">"https://bit.ly/3dVXPJ7"</span>, </span>
<span>                                   height<span class="op">=</span><span class="fl">150</span>, width<span class="op">=</span><span class="fl">150</span><span class="op">)</span>, </span>
<span>                                 <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html" class="external-link">HTML</a></span><span class="op">(</span><span class="st">"&lt;br/&gt;Table of Pvalues"</span><span class="op">)</span>,</span>
<span>                               style<span class="op">=</span><span class="st">"display: inline-block; padding: 0px 10px 0px 10px;"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span>    </span>
<span>    <span class="co"># Tab 2: 3D volcano plot </span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span><span class="st">"Volcano"</span>, value<span class="op">=</span><span class="st">"v"</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fu"><a href="https://rdrr.io/pkg/shinycssloaders/man/withSpinner.html" class="external-link">withSpinner</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plotly-shiny.html" class="external-link">plotlyOutput</a></span><span class="op">(</span><span class="st">"volcano"</span>, height<span class="op">=</span><span class="fl">720</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">4</span>, </span>
<span>                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span></span>
<span>                            <span class="co"># option for data type</span></span>
<span>                            <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/radioButtons.html" class="external-link">radioButtons</a></span><span class="op">(</span><span class="st">"data_type"</span>, </span>
<span>                                                   label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="st">"Polar radius"</span><span class="op">)</span>,</span>
<span>                                                   choices<span class="op">=</span></span>
<span>                                                       <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Z score"</span><span class="op">=</span><span class="fl">1</span>, </span>
<span>                                                            <span class="st">"Fold change"</span><span class="op">=</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>                                                   selected<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidRow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="st">"boxplots"</span>, height<span class="op">=</span><span class="fl">400</span><span class="op">)</span><span class="op">)</span></span>
<span>                 <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Tab 3: Gene search:</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span><span class="st">"Genes"</span>, value<span class="op">=</span><span class="st">"g"</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">3</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectizeInput</a></span><span class="op">(</span></span>
<span>                            <span class="st">"gene"</span>, label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h5</a></span><span class="op">(</span><span class="st">"Select a Gene"</span><span class="op">)</span>,</span>
<span>                            choices<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">df</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                            options<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                onInitialize<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span></span>
<span>                                    <span class="st">'function() { this.setValue(""); }'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="st">"gene_plots"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    </span>
<span>    <span class="co"># Tab 4: table setup:</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span><span class="st">"Table"</span>, value<span class="op">=</span><span class="st">"t"</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span></span>
<span>                     <span class="fl">2</span>,</span>
<span>                     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/checkboxGroupInput.html" class="external-link">checkboxGroupInput</a></span><span class="op">(</span></span>
<span>                         <span class="st">'group'</span>,</span>
<span>                         <span class="st">'Select upregulated groups'</span>,</span>
<span>                         <span class="va">syn_polar</span><span class="op">@</span><span class="va">labs</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                         <span class="co"># by default select all significant</span></span>
<span>                         selected<span class="op">=</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">labs</span><span class="op">[</span></span>
<span>                             <span class="va">syn_polar</span><span class="op">@</span><span class="va">labs</span> <span class="op">!=</span> </span>
<span>                                 <span class="st">"ns"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html" class="external-link">dataTableOutput</a></span><span class="op">(</span><span class="st">"full_table"</span><span class="op">)</span><span class="op">)</span></span>
<span>             <span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span><span class="op">)</span>    </span></code></pre></div>
<p><strong>PEAC Server</strong></p>
<p>The server build the objects and plots required for the app.</p>
<div class="sourceCode" id="section-cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="co"># Navitation tab: allow images to link to tabs</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_v</span>, <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html" class="external-link">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"v"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_g</span>, <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html" class="external-link">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"g"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">link_to_tabpanel_t</span>, <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/updateTabsetPanel.html" class="external-link">updateNavbarPage</a></span><span class="op">(</span><span class="va">session</span>, <span class="st">"mainNavbarPage"</span>, <span class="st">"t"</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Volcano tab: Create the 3D volcano plot</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">volcano</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plotly-shiny.html" class="external-link">renderPlotly</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">data_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">data_type</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">data_type</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="va">data_type</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>        </span>
<span>        <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/volcano3D.html">volcano3D</a></span><span class="op">(</span><span class="va">syn_polar</span>,</span>
<span>                       type <span class="op">=</span> <span class="va">data_type</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    </span>
<span>    <span class="co"># Volcano tab: Create pathotype boxplots when genes clicked </span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">boxplots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/event_data.html" class="external-link">event_data</a></span><span class="op">(</span><span class="st">"plotly_click"</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span>
<span>        <span class="va">gene</span> <span class="op">=</span> <span class="va">s</span><span class="op">$</span><span class="va">key</span></span>
<span>        <span class="fu"><a href="../reference/boxplot_trio.html">boxplot_trio</a></span><span class="op">(</span><span class="va">syn_polar</span>,</span>
<span>                     value <span class="op">=</span> <span class="va">gene</span>,</span>
<span>                     test <span class="op">=</span> <span class="st">"polar_pvalue"</span>,</span>
<span>                     step_increase <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span>        </span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Gene tab: create plots for selected genes</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">gene_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">s</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">gene</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/req.html" class="external-link">req</a></span><span class="op">(</span><span class="va">s</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="co"># synovium pathotype boxplot</span></span>
<span>        <span class="va">gene</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">gene</span></span>
<span>        <span class="va">path_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/boxplot_trio.html">boxplot_trio</a></span><span class="op">(</span><span class="va">syn_polar</span>,</span>
<span>                                  value <span class="op">=</span> <span class="va">gene</span>,</span>
<span>                                  test <span class="op">=</span> <span class="st">"polar_pvalue"</span>,</span>
<span>                                  step_increase <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span>        </span>
<span>        </span>
<span>        <span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">syn_metadata</span>, <span class="st">"expression"</span><span class="op">=</span><span class="va">syn_rld</span><span class="op">[</span><span class="va">gene</span>, <span class="op">]</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="co"># synovium gender boxplot</span></span>
<span>        <span class="va">g_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Gender</span>, y<span class="op">=</span><span class="va">expression</span>, fill<span class="op">=</span><span class="va">Gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>outlier.shape<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">0.25</span>, height<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="co"># synovium batch boxplot</span></span>
<span>        <span class="va">b_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Batch</span>, y<span class="op">=</span><span class="va">expression</span>, fill<span class="op">=</span><span class="va">Batch</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>outlier.shape<span class="op">=</span><span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html" class="external-link">geom_jitter</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">0.25</span>, height<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span><span class="va">path_plot</span>, <span class="va">g_plot</span>, <span class="va">b_plot</span>, ncol<span class="op">=</span><span class="fl">3</span>, align<span class="op">=</span><span class="st">"hv"</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    </span>
<span>    <span class="co"># Table Tab: create a data table of stats for upregulated genes. </span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">full_table</span> <span class="op">&lt;-</span> <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/dataTableOutput.html" class="external-link">renderDataTable</a></span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="va">pvals</span> <span class="op">&lt;-</span> <span class="va">syn_polar</span><span class="op">@</span><span class="va">pvals</span></span>
<span>        <span class="va">padj</span> <span class="op">&lt;-</span> <span class="va">syn_polar</span><span class="op">@</span><span class="va">padj</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">pvals</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P_LRT"</span>, <span class="st">"P_LvM"</span>, <span class="st">"P_LvF"</span>, <span class="st">"P_MvF"</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">padj</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P_adj_LRT"</span>, <span class="st">"P_adj_LvM"</span>, <span class="st">"P_adj_LvF"</span>, <span class="st">"P_adj_MvF"</span><span class="op">)</span></span>
<span>        <span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">pvals</span>, <span class="va">padj</span><span class="op">)</span></span>
<span>        <span class="va">tab</span> <span class="op">&lt;-</span> <span class="va">tab</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">tab</span><span class="op">[</span>, <span class="st">'P_LRT'</span><span class="op">]</span><span class="op">)</span>, <span class="op">]</span></span>
<span>        <span class="va">groups</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">group</span></span>
<span>        <span class="va">tab</span> <span class="op">&lt;-</span> <span class="va">tab</span><span class="op">[</span><span class="va">syn_polar</span><span class="op">@</span><span class="va">df</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">lab</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">groups</span>, <span class="op">]</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">tab</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            rowCallback <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/htmlwidgets/man/JS.html" class="external-link">JS</a></span><span class="op">(</span></span>
<span>                <span class="st">"function(row, data) {"</span>,</span>
<span>                <span class="st">"for (i = 1; i &lt; data.length; i++) {"</span>,</span>
<span>                <span class="st">"if (data[i]&gt;0 | data[i]&lt;0){"</span>,</span>
<span>                <span class="st">"$('td:eq('+i+')', row).html(data[i].toExponential(1));"</span>,</span>
<span>                <span class="st">"}"</span>,</span>
<span>                <span class="st">"}"</span>,</span>
<span>                <span class="st">"}"</span><span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span>, options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bInfo<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>PEAC shinyApp</strong></p>
<p>Once the ui and server are build we can output the app <em>(note in
markdown/html format this is not interactive)</em>.</p>
<div class="sourceCode" id="section-cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
<iframe data-deferred-src="appaacc5a22f3d0988b288744c1832c903a/?w=&amp;__subapp__=1" width="100%" height="400" class="shiny-frame shiny-frame-deferred"></iframe>
</div>
<div class="section level2">
<h2 id="section-hosting-and-deploying-shiny-apps">Hosting and Deploying shiny apps<a class="anchor" aria-label="anchor" href="#section-hosting-and-deploying-shiny-apps"></a>
</h2>
<p>There are three primary ways to deploy the app to the web, as
outlined on the <a href="https://shiny.rstudio.com/deploy/" class="external-link">shiny
website</a>: shinyapps.io, shiny servers and RStudio Connect. The PEAC
website was deployed using Shiny Server. Here are a few useful tutorials
and sources for using each of these methods:</p>
<p><strong>shinyapps.io</strong></p>
<p>To deploy with shinyapps.io through the cloud see <a href="http://www.shinyapps.io" class="external-link">http://www.shinyapps.io</a>. There are
free plans available for up to 5 apps and fewer than 25 active hours,
further than this however it is paywalled.</p>
<p><strong>Deploying with Shiny Server</strong></p>
<p>Shiny Server is a back end program so gives you complete control.
There are a few nice tutorials for deploying shiny apps on a server:</p>
<ul>
<li>
<a href="https://www.linode.com/docs/development/r/how-to-deploy-rshiny-server-on-ubuntu-and-debian/" class="external-link">How
to Deploy Interactive R Apps with Shiny Server</a> - Jared Kobos</li>
<li>
<a href="https://www.r-bloggers.com/deploying-your-very-own-shiny-server/" class="external-link">Deploying
Your Very Own Shiny Server</a> - Morgan Benton</li>
</ul>
<p>Alternatively, Docker is also useful for deploying shiny apps into
discrete units (containers) with their own virtual environment:</p>
<ul>
<li>
<a href="https://towardsdatascience.com/deploy-your-rshiny-app-locally-with-docker-427386010eba" class="external-link">Deploy
your RShiny App Locally with Docker</a> - Jillian Rowe</li>
<li>
<a href="https://juanitorduz.github.io/dockerize-a-shinyapp/" class="external-link">Dockerize a
shinyApp</a> - Dr. Juan Camilo Orduz</li>
<li>
<a href="https://telethonkids.wordpress.com/2019/02/08/deploying-an-r-shiny-app-with-docker/" class="external-link">Deploying
an R Shiny App With Docker</a> - Paul Stevenson</li>
</ul>
<p><strong>RStudio Connect</strong></p>
<p>RStudio connect is a publishing platform designed to be used
internally by businesses. I have not looked into using this method but
for more information see <a href="https://rstudio.com/products/connect/" class="external-link">https://rstudio.com/products/connect/</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Katriona Goldmann, Myles Lewis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
